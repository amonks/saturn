{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// main.js\n\n/* global $ Saturn Chart Handlebars Analyst */\n\n$(function () {\n\n  let render = function (data) {\n    console.log('rendering')\n    $('#analysis').addClass('hidden')\n    $('#data').empty()\n\n    if (data.length > 0) {\n      $('#analysis').removeClass('hidden')\n\n      let analysis = analyst.analyze(data)\n\n      let chartData = []\n\n      let hueIndex = 1\n      for (let entry of analysis.entries()) {\n        let hue = (hueIndex / analysis.total) * 360\n        chartData.push({\n          value: entry.count,\n          label: entry.tag,\n          color: 'hsl(' + hue + ', 100%, 80%)'\n        })\n        hueIndex += 1\n      }\n\n      let chartOptions = []\n      let ctx = $('#chart').get(0).getContext('2d')\n      let chart = new Chart(ctx).Doughnut(chartData, chartOptions)\n      $('chart').append(chart)\n    }\n  }\n\n  // play a sound\n  let snd = false\n  let ping = function () {\n    console.log('pinging')\n    snd = snd || new window.Audio('ping.mp3')\n    snd.play()\n  }\n\n  // show browser notification\n  let notify = function (text) {\n    console.log('notify: ', text)\n    // Let's check if the browser supports notifications\n    if (!('Notification' in window)) {\n      return false\n\n    // Let's check whether notification permissions have already been granted\n    } else if (window.Notification.permission === 'granted') {\n      // If it's okay let's create a notification\n      return new window.Notification(text)\n\n    // Otherwise, we need to ask the user for permission\n    } else if (window.Notification.permission !== 'denied') {\n      window.Notification.requestPermission(function (permission) {\n        // If the user accepts, let's create a notification\n        if (permission === 'granted') {\n          return new window.Notification(text)\n        }\n      })\n    }\n  }\n\n  // show form\n  let ask = function (partial) {\n    ping()\n    notify('What are you doing?')\n\n    let html = Handlebars.templates.form(partial)\n    $('#forms').prepend(html)\n\n    $('.tag').typeahead({\n      source: analyst.analyze(saturn.data()).tags\n    })\n\n    listen(partial)\n  }\n\n  // handle new-data form\n  let listen = function (partial) {\n    let form = $('#' + partial.id)\n\n    form.submit(function (event) {\n      event.preventDefault()\n\n      // get tag\n      let tag = form.find('.tag').val()\n\n      // validate tag\n      if (tag.length === 0) {\n        form.addClass('has-error')\n        return false\n      }\n\n      // complete datum\n      partial.tag = tag\n\n      // send to saturn\n      saturn.add(partial)\n\n      // remove form\n      $('#' + partial.id).remove()\n    })\n  }\n\n  let saturn = new Saturn()\n  let analyst = new Analyst()\n\n  saturn.subscribe(render)\n\n  $('#clear').click(saturn.clear)\n\n  saturn.start({\n    prompt: ask,\n    minutes: 40,\n    askFirst: false\n  })\n\n  render(saturn.data())\n})\n"],"sourceRoot":"/source/"}